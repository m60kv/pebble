"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(t){window.HIKO=_objectSpread(_objectSpread({},window.HIKO),{},{extension:!0});var e={};if(function(t){t||(t="info");for(var n={debug:2,info:3,warn:4,error:5},o=0,i=Object.keys(n);o<i.length;o++){var a=i[o];e[a]=n[a]<n[t]?function(){}:console[a].bind(window.console,"".concat(a.toUpperCase(),": "))}e.debug("init log ".concat(t))}(null===(t=document.currentScript)||void 0===t?void 0:t.getAttribute("level")),window.HIKO.script)e.debug("script > exit");else{var n="hiko_socials",o="abw",i="g_id_onload",a="g_id_marketing";if(!(location.protocol.indexOf("http")<0||/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/challenge($|\?)/.test(location.pathname))){var r,c=window.Shopify.shop,d="undefined"!=typeof __st&&__st.cid?__st.cid:void 0,s=!1;document.addEventListener("hiko",(function(t){return e.debug("catch evnet: ".concat(JSON.stringify(t.detail)))})),e.debug("0720");var u,l,p=!1,f=(u=location.href,l={},u.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,e,n){return l[e]=n})),l).ha;f&&/^[a-f0-9]{78,}$/.test(f)?q(f).then(P):(document.addEventListener("onetap",(function(t){if(e.debug("catch onetap evnet: ".concat(JSON.stringify(t.detail))),"display"===t.detail.action){var n,o=document.getElementById(i),c=function(){if("iframe"===t.detail.type){var e=o.querySelector("iframe");if("0px"===getComputedStyle(e).getPropertyValue("bottom"))return e}var n=document.querySelector("#credential_picker_iframe");if(n)return n}();if(c)c.style.bottom="58px",o.insertAdjacentHTML("beforeend","<style> .otc { position: fixed; bottom: 0px; left: 0px; z-index: ".concat(c.style.zIndex,'; width; 100%; height: 60px; padding: 0 8px 0 8px;} .otc > div {background-color: white; border-top: 1px solid #dadce0;}</style>\n                <div id="').concat(a,'" class="otc">').concat(null===(n=r.onetap.marketing)||void 0===n?void 0:n.content,"</div>"));else if(t.detail.width){var d;o.insertAdjacentHTML("beforeend","<style> .otc { width: ".concat(t.detail.width,'px; padding: 0 8px 0 8px;} .otc > div {background-color: white; border-radius: 8px; box-shadow: 0 0 0 1px #dadce0;}</style>\n                <div id="').concat(a,'" class="otc">').concat(null===(d=r.onetap.marketing)||void 0===d?void 0:d.content,"</div>"))}var s=o.querySelector("#".concat(a));s&&s.addEventListener("click",(function(t){return t.stopPropagation()}))}else if("hide"===t.detail.action){var u=document.getElementById(a);u&&(u.style.display="none")}})),new Promise((function(t,o){var i=g(n);null!=i&&i.version?(r=i,t(i)):v("POST","/apps/authapp/load",{}).then((function(o){r=o,e.debug("init config"),y(n,o),t(o)})).catch((function(t){e.error(t.message),o()}))})).then((function(t){if(r=t,d)return function(){var t,e,n=g(o);n&&(v("POST","/apps/authapp/user",{id:n,cid:d}),y(o));if(!(null!==(t=r.avatar)&&void 0!==t&&t.profile||null!==(e=r.avatar)&&void 0!==e&&e.header))return;var i=g("hiko_"+d);void 0!==(null==i?void 0:i.avatar)?C(i):v("POST","/apps/authapp/avatar",{id:d,social:r.click||""}).then((function(t){y("hiko_"+d,t),C(t)})).catch((function(){}))}();var i,a,c;(document.querySelector('div[name="hiko-container"]')||document.querySelector('form[action*="/account"]'))&&T(),function(){var t,n;if(null===(t=r.onetap)||void 0===t||!t.enable)return;if(/.*\/account/.test(location.pathname))return;if((/(iPod|iPhone|iPad)/.test(navigator.userAgent)||/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&!r.onetap.safari)return void e.warn("one tap not supported");if(function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null}("onet"))return void e.warn("one tap supressed");var o=(null===(n=r.onetap.position)||void 0===n?void 0:n.maxWidth)||480;if(!1===r.onetap.mobile&&o>=window.innerWidth)return void e.debug("mobile disabled for width ".concat(window.innerWidth));!0===r.events&&(s=!0);var i=r.onetap.custom?E:_;r.onetap.delay?isNaN(r.onetap.delay)||setTimeout((function(){e.debug("delay due "+r.onetap.delay),i(w)}),1e3*r.onetap.delay):i(w)}(),function(){try{var t=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&"lang"===t.attributeName&&(y(n),T()),"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE&&(t.querySelector('form[action*="/account"]')&&T(),"FORM"===t.nodeName)){var n,o=_createForOfIteratorHelper(t.attributes);try{for(o.s();!(n=o.n()).done;){var i=n.value;"action"===i.name&&(e.debug("add form ".concat(i.value)),i.value.indexOf("/account")>=0&&T())}}catch(t){o.e(t)}finally{o.f()}}}))}))}));t.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),t.observe(document.body,{childList:!0,subtree:!0})}catch(t){e.error(t.message)}}(),v("POST","/apps/authapp/load",{version:(i=g(n)).version,locale:i.locale}).then((function(t){if(t.version&&(i.version!==t.version||t.error)){e.debug("config version ".concat(i.version," > ").concat(t.version)),y(n,t);var o=document.querySelectorAll('div[name="hiko-container"]');o.length&&(o.forEach((function(t){return t.remove})),r=t,T())}})),null!==(a=r.ip)&&void 0!==a&&a.address||null!==(c=r.ip)&&void 0!==c&&c.disable||v("GET","https://api.ipify.org?format=json").then((function(t){null!=t&&t.ip&&(e.debug("ip ".concat(t.ip)),r.ip={address:t.ip},b(n,{ip:_objectSpread({},r.ip)}))})).catch((function(t){return e.debug("popup ip fail ".concat(null==t?void 0:t.message))}))})))}}function m(t){var e;if(null!==(e=r.onetap.marketing)&&void 0!==e&&e.enable)if(t)p||(p=!0,document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"iframe",width:t}})));else{var n=document.getElementById(i).querySelector("iframe");"0px"===getComputedStyle(n).getPropertyValue("bottom")&&document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"iframe"}}))}}function h(){var t=document.documentElement.lang;return/^[A-Za-z]{2,4}([_-][A-Za-z]{4})?([_-]([A-Za-z]{2}|[0-9]{3}))?$/.test(t)?t:""}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(o,i){var a=new XMLHttpRequest,r=function(t){var e=[];for(var n in t)e.push("".concat(n,"=").concat(encodeURIComponent(""+t[n]||"")));return e.join("&")}(_objectSpread(_objectSpread({},n),{},{app:"auth-app",href:encodeURIComponent(location.href),lang:h()}));"POST"===t?(a.open("POST","".concat(location.origin).concat(e),!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):a.open("GET",e.indexOf("http")<0?"https://apps.hiko.link".concat(e,"?").concat(r):e),a.onload=function(){204===a.status?o({}):200===a.status?o(JSON.parse(a.responseText)):i()},a.send(r)}))}function g(t){var e=sessionStorage.getItem(t);if(e)return JSON.parse(e)}function y(t,n){if(!t&&"string"!=typeof t)return e.error("invalid storage set");if(n)if(n.error){var o=JSON.parse(JSON.stringify(n));delete o.error,sessionStorage.setItem(t,JSON.stringify(o))}else sessionStorage.setItem(t,JSON.stringify(n));else sessionStorage.removeItem(t)}function b(t,e){y(t,_objectSpread(_objectSpread({},g(t)||{}),e))}function w(t){var o,i=_objectSpread(_objectSpread({},t),{},{href:encodeURIComponent(location.href),lang:h(),cip:(null===(o=r.ip)||void 0===o?void 0:o.address)||""}),c=document.getElementById(a);if(c){var d=c.querySelector('input[type="checkbox"]');i.checked=""+d.checked,e.debug("one tap marketing conent ".concat(d.checked))}s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"onetap",social:"google"}})),document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"hide"}})),b(n,{click:"google"}),v("POST","/apps/authapp/onetap",i).then((function(t){t&&(t.token?(L(),A(t)):t.multipass?(L(),k(t)):(L(),x(t)))}))}function k(t){s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"multipass",email:t.email,customer_id:t.customer_id,new_customer:t.new_customer}})),window.location.replace(t.multipass)}function S(t){e.debug(t),"display"===(null==t?void 0:t.g)&&null!=t&&t.h&&(e.debug("one tap block display"),function(){var t;if(null!==(t=r.onetap.marketing)&&void 0!==t&&t.enable){var e=document.getElementById(i);e&&(document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"block"}})),new MutationObserver((function(t){t.forEach((function(t){if("attributes"===t.type&&"credential_picker_container"===t.target.id&&!p){p=!0;var n=e.querySelector("iframe");document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"display",type:"block",width:n.offsetWidth}}))}}))})).observe(e,{subtree:!0,attributes:!0}))}}(),v("POST","/apps/authapp/event",{name:"onetappop",path:location.pathname}).catch((function(t){return e.error(t.message)}))),"skipped"===(null==t?void 0:t.g)&&(e.debug("one tap block skipped"),document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"hide"}})))}function E(t){var n,o,a;e.debug("poping custom one tap");var c=(null===(n=r.onetap.position)||void 0===n?void 0:n.right)||20,d=(null===(o=r.onetap.position)||void 0===o?void 0:o.top)||20,s=(null===(a=r.onetap.position)||void 0===a?void 0:a.zIndex)||999;e.debug("popping one block ".concat(c,", ").concat(d,", ").concat(s));var u="onetap".concat((new Date).getTime());window[u]=t;var l="momentCallback".concat((new Date).getTime());window[l]=S,document.body.insertAdjacentHTML("beforeend",'<div id="'.concat(i,'"\n                data-client_id="').concat(r.onetap.id,'"\n                data-prompt_parent_id="').concat(i,'"\n                data-callback="').concat(u,'"\n                data-itp_support="true"\n                data-moment_callback="').concat(l,'"\n                style="position: absolute; right: ').concat(c,"px; top: ").concat(d,"px;  z-index: ").concat(s,';">\n                </div>')),function(t){var n=t.indexOf("http")>=0?t:"https://apps.hiko.link".concat(t);document.querySelectorAll('script[src^="'.concat(n,'"]')).length>0?Promise.resolve():new Promise((function(o){var i=document.createElement("script");i.src=n,i.defer="defer",i.async="async",i.onload=function(){e.debug("".concat(t," loaded")),o()},document.head.appendChild(i)}))}("https://accounts.google.com/gsi/client")}function _(t){var n,o,a,c;e.debug("poping one tap");var d="_".concat(Math.round(1e7*Math.random()).toString(36)),s=(null===(n=r.onetap.position)||void 0===n?void 0:n.right)||20,u=(null===(o=r.onetap.position)||void 0===o?void 0:o.top)||20,l=(null===(a=r.onetap.position)||void 0===a?void 0:a.zIndex)||999;e.debug("popping one tap frame ".concat(d,", ").concat(s,", ").concat(u,", ").concat(l));var p=document.createElement("style");p.innerHTML="\n              .".concat(d,"cz {position: fixed !important;  right: ").concat(s,"px; top: ").concat(u,"px;  z-index: ").concat(l,";}\n              .").concat(d,"z { border: none;}\n              @media screen and (max-width: ").concat((null===(c=r.onetap.position)||void 0===c?void 0:c.maxWidth)||480,"px) { .").concat(d,"z { position: fixed; bottom: 0px; left: 0px; z-index: 2147483647; width: 100%; height: 239px;  border: none; } }\n            ");var f=I('<div id="'.concat(i,'" style="display: none;" class="').concat(d,'cz"/>')),h=I('<iframe class="'.concat(d,'z" src="https://cdn.shopify.com/s/files/1/0279/9478/3882/t/5/assets/hiko-tap.html?v=').concat((new Date).getTime(),"&client=").concat(r.onetap.id,'"></iframe>'));f.append(h),document.body.append(p),document.body.append(f),m(),window.addEventListener("message",(function(n){if("size"===n.data.type)h.style.width=n.data.width+"px",h.style.height=n.data.height+"px",e.debug("one tap popup with (".concat(n.data.width,", ").concat(n.data.height,")")),m(n.data.width);else if("notification"===n.data.type){var o=n.data.notification.g,i=n.data.notification.h;e.debug("".concat(o," one tap, ").concat(JSON.stringify(n.data.notification))),"display"===o?!0===i?(f.style.display="block",v("POST","/apps/authapp/event",{name:"onetappop",path:location.pathname}).catch((function(t){return e.error(t.message)})),document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"popup",social:"google"}}))):!1===i&&(e.debug("display false"),f.remove()):"skipped"==o&&(f.style.display="none",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="; expires="+o.toGMTString();document.cookie=t+"="+e+i+"; path=/"}("onet",n.data.notification.m),e.debug("user_cancel one tap"),document.dispatchEvent(new CustomEvent("onetap",{detail:{action:"hide"}})))}else"credential"===n.data.type&&t(n.data.token)}))}function x(t){s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"login",email:t.email,customer_id:t.id}})),O(t.contextpath,{"customer[email]":t.email,"customer[password]":t.password})}function A(t){s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"activate",customer_id:t.id}})),O(t.contextpath,{"customer[password]":t.password,"customer[password_confirmation]":t.password,token:t.token,utf8:"✓",id:t.id})}function O(t,e){var n=I('<form method="post" action="'.concat(t,'" style="display: none;"/>'));for(var o in e)e[o]&&n.insertAdjacentHTML("beforeend",'<input name="'.concat(o,'" value="').concat(e[o],'"/>'));document.body.append(n),n.submit()}function T(){var t=function(){var t=document.querySelectorAll('div[name="hiko-container"]');if(t.length){var n,o=[],i=!1,a=_createForOfIteratorHelper(t);try{var d=function(){var t=n.value;""===t.getAttribute("ignore")?(i=!0,e.debug("ignore container"),t.querySelectorAll("div[data]").forEach((function(e){return e.onclick=function(){return j({button:e,container:t})}})),document.head.insertAdjacentHTML("beforeend",'<style id="hikoimages">'.concat(r.images,"</style>"))):o.push(t)};for(a.s();!(n=a.n()).done;)d()}catch(t){a.e(t)}finally{a.f()}return i?[]:o}if(/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/cart($|\?)/.test(location.pathname))return[];var s=document.querySelectorAll('form[action*="/account"]'),u=[];return s.forEach((function(t){var n;if(!(t.querySelector('div[name="hiko-container"]')||(null===(n=t.action)||void 0===n?void 0:n.indexOf("/account/recover"))>=0))if(null!==t.querySelector("input[type=email]")||"portal-bosque.myshopify.com"!==c)if(t.querySelector('input[name="checkout_url"]')&&t.querySelector('input[name="guest"]'))e.debug("gest form, skip container");else{var o=t.action.indexOf("/account/login")>=0?I('<div name="hiko-container" type="login" app/>'):I('<div name="hiko-container" type="register" app/>');"top"===r.position?t.prepend(o):t.append(o),u.push(o)}else e.debug("no input email, skip container")})),u}();!0===r.events&&(s=!0),(null==t?void 0:t.length)>0&&(document.querySelectorAll("#hikostyles").forEach((function(t){return t.remove()})),document.querySelectorAll("#hikoimages").forEach((function(t){return t.remove()})),document.head.insertAdjacentHTML("beforeend",'<style id="hikostyles">'.concat(r.css,"</style>")),document.head.insertAdjacentHTML("beforeend",'<style id="hikoimages">'.concat(r.images,"</style>")),t.forEach((function(t){t.innerHTML="";var e=t.getAttribute("type")||"login";t.insertAdjacentHTML("afterbegin",r.html[e]),function(t){var e=t.querySelector(".".concat(r.classes.consent)),n=t.querySelectorAll(".".concat(r.classes.buttons," > div"));n.forEach((function(n){return n.onclick=function(){return j({button:n,consent:e,classes:r.classes,marketing:r.marketing,container:t})}}))}(t)}))),function(){var t,e=r,n=e.marketing,i=e.ip,a=_createForOfIteratorHelper(document.querySelectorAll('form[action*="/account"]'));try{var c=function(){var e=t.value;e.addEventListener("submit",(function(){var t,a,r=null===(t=e.querySelector('input[name="customer[password]"]'))||void 0===t?void 0:t.value,c=null===(a=e.querySelector('input[name="customer[email]"]'))||void 0===a?void 0:a.value,d=encodeURIComponent(Math.random().toString(36).substr(5)),s={id:d,email:c};if(null!=i&&i.address&&(s.cip=i.address),n){var u=document.querySelector('input[name="'.concat(n,'"][type="checkbox"]'));u&&(s.mkt=u.checked)}c&&r&&d&&(y(o,d),v("POST","/apps/authapp/user",s))}))};for(a.s();!(t=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}}()}function j(t){var o,i,a,d=t.button,u=t.consent,l=t.classes,p=t.marketing,f=t.container,m=d.getAttribute("data");if(e.debug("".concat(m," clicked")),s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{social:m,action:"click"}})),u){var v=u.querySelector("input");if(v){if(!1===v.checked)return u.setAttribute("class",l.consent+" "+l.disagree);u.setAttribute("class",l.consent)}}var g={google:{width:450,height:680},facebook:{width:520,height:600},spotify:{width:520,height:470},twitter:{width:700,height:800},linkedin:{width:480,height:580},amazon:{width:420,height:630},line:{width:400,height:730},snapchat:{width:400,height:730},kakao:{width:400,height:680},tumblr:{width:430,height:760},twitch:{width:400,height:370},discord:{width:500,height:730},reddit:{width:860,height:620},vk:{width:680,height:450},tiktok:{width:400,height:620}},y=(null===(o=g[m])||void 0===o?void 0:o.width)||400,w=(null===(i=g[m])||void 0===i?void 0:i.height)||580;b(n,{click:m});var k=h(),S=function(){if(p){var t=document.querySelector('input[name="'.concat(p,'"][type="checkbox"]'));if(t)return t.checked}return""}(),E=encodeURIComponent(location.href),_=(new Date).getTime(),x=(null==f?void 0:f.getAttribute("register_tag"))||"",A=(null===(a=r.ip)||void 0===a?void 0:a.address)||"";try{window.addEventListener("message",z,!1),window.open("https://apps.hiko.link/js/login.html?social=".concat(m,"&shop=").concat(c,"&href=").concat(E,"&lang=").concat(k,"&mkt=").concat(S,"&register_tag=").concat(x,"&cip=").concat(A,"&ts=").concat(_),"Login social","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(y,", height=").concat(w)).focus()}catch(t){e.debug("redirecting ..."),O("https://apps.hiko.link/admin/auth",{social:m,shop:c,href:E,lang:k})}}function z(t){e.debug("received from popup ".concat(t.origin)),t.data.en&&q(t.data.en).then(P)}function q(t){var e=new TextEncoder("hex"),n=new TextDecoder("utf8");return crypto.subtle.importKey("raw",e.encode(c.substring(0,16)),"AES-GCM",!0,["decrypt"]).then((function(n){return crypto.subtle.decrypt({name:"AES-GCM",iv:e.encode(c.replace(".","").substring(0,16))},n,new Uint8Array(t.match(/../g).map((function(t){return parseInt(t,16)}))).buffer)})).then((function(t){return JSON.parse(n.decode(t))}))}function P(t){"login"===t.name?(L(),x(t.data)):"multipass"===t.name?(L(),k(t.data)):"activate"===t.name?(L(),A(t.data)):"error"===t.name&&function(t){var e=t.code,n=t.type,o=t.email,i=t.message;s&&document.dispatchEvent(new CustomEvent("hiko",{detail:{action:"error",message:i}}));if(o&&541===e){var a=document.querySelectorAll('input[name="customer[email]"]');a.length&&a.forEach((function(t){return t.value=o}))}document.querySelectorAll('div[name="hiko-err"]').forEach((function(t){t.innerHTML="";var e=document.createElement("div");t.append(e),"error"===n?(e.setAttribute("class","form-message form-message--error errors"),e.insertAdjacentHTML("beforeend",'<i class="fas fa-exclamation-circle"/>')):"warning"===n?(e.setAttribute("class","form-message form-message--success"),e.insertAdjacentHTML("beforeend",'<i class="fas fa-exclamation"/>')):(e.setAttribute("form-message form-message--success"),e.insertAdjacentHTML("beforeend",'<i class="fas fa-check-circle"/>')),e.append(document.createTextNode(" "+i))}))}(t.data)}function C(t){if(null!=t&&t.avatar){var e=function(t){var e=t.first_name,n=t.last_name;if(!e&&!n)return"";if(e&&n)return"".concat(e," ").concat(n);if(e)return e;if(n)return n}(t),n=document.querySelectorAll('[name="hiko-avatar"]');if(n.length)n.forEach((function(n){if(t.avatar){if("IMG"===n.tagName)n.setAttribute("src",t.avatar),n.setAttribute("title",e);else if("A"===n.tagName){var o=n.querySelector("img");o?(o.setAttribute("src",t.avatar),o.setAttribute("title",e)):n.insertAdjacentHTML("beforeend",'<img src="'.concat(t.avatar,'" title="').concat(e,'"/>'))}n.style.dispay="block"}}));else if(/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/account($|\?)/.test(location.pathname)){var o;if(null===(o=r.avatar)||void 0===o||!o.profile)return;var i=document.querySelector("a[href*='/account/addresses']");if(i){var a,c,d='<img src="'.concat(t.avatar,'" title="').concat(e,'" alt="').concat(e,'" style="border-radius: 20%;width: 64px;height: 64px;margin-top: 10px"/>');null!==(a=r.avatar)&&void 0!==a&&a.profile_link&&(d='<a href="'.concat(null===(c=r.avatar)||void 0===c?void 0:c.profile_link,'">').concat(d,"</a>"));var s=I(d);i.parentNode.after(s),s.after(I("<p><bold>".concat(e,"</bold></p>")))}}else{var u;if(null===(u=r.avatar)||void 0===u||!u.header)return;var l=document.querySelectorAll("a[href*='/account']");if(l.length){var p,f,m='<img src="'.concat(t.avatar,'" class="icon" title="').concat(e,'" alt="').concat(e,'" style="border-radius: 20%;width: 24px;height: 24px"/>');null!==(p=r.avatar)&&void 0!==p&&p.header_link&&(m='<a href="'.concat(null===(f=r.avatar)||void 0===f?void 0:f.header_link,'">').concat(m,"</a>"));var h=I(m);l.forEach((function(t){if(t.href&&t.href.match(/.*\/account$/)&&t.closest("header")){var e=t.cloneNode();e.append(h),t.after(e)}}))}}}}function I(t){var n=document.createElement("div");return n.innerHTML=t,1!==n.childElementCount&&e.error("childrens "+n.childElementCount+", "+t),n.firstChild}function L(){document.body.insertAdjacentHTML("beforeend",'<style>\n        .hikoloading {\n          position: absolute;\n          top: 0;\n          left: 0;\n          z-index: 100;\n          width: 100vw;\n          height: 400vh;\n          background-color: rgba(192, 192, 192, 0.5);\n          background-repeat: no-repeat;\n          background-position: center;\n        }\n        .hikospinner {\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          margin: auto;\n          width: 50px;\n          height: 50px;\n          -webkit-animation-name: hikospin;\n          -webkit-animation-duration: 2000ms;\n          -webkit-animation-iteration-count: infinite;\n          -webkit-animation-timing-function: linear;\n          -moz-animation-name: hikospin;\n          -moz-animation-duration: 2000ms;\n          -moz-animation-iteration-count: infinite;\n          -moz-animation-timing-function: linear;\n          -ms-animation-name: hikospin;\n          -ms-animation-duration: 2000ms;\n          -ms-animation-iteration-count: infinite;\n          -ms-animation-timing-function: linear;\n          animation-name: hikospin;\n          animation-duration: 2000ms;\n          animation-iteration-count: infinite;\n          animation-timing-function: linear;\n        }\n      \n        @-ms-keyframes hikospin {\n          from {\n            -ms-transform: rotate(0deg);\n          }\n          to {\n            -ms-transform: rotate(360deg);\n          }\n        }\n      \n        @-moz-keyframes hikospin {\n          from {\n            -moz-transform: rotate(0deg);\n          }\n          to {\n            -moz-transform: rotate(360deg);\n          }\n        }\n      \n        @-webkit-keyframes hikospin {\n          from {\n            -webkit-transform: rotate(0deg);\n          }\n          to {\n            -webkit-transform: rotate(360deg);\n          }\n        }\n      \n        @keyframes hikospin {\n          from {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n      </style>\n      \n      <div class="hikoloading">\n        <div class="hikospinner">\n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4335 4335" width="50" height="50">\n            <path\n              fill="black"\n              d="M3346 1077c41,0 75,34 75,75 0,41 -34,75 -75,75 -41,0 -75,-34 -75,-75 0,-41 34,-75 75,-75zm-1198 -824c193,0 349,156 349,349 0,193 -156,349 -349,349 -193,0 -349,-156 -349,-349 0,-193 156,-349 349,-349zm-1116 546c151,0 274,123 274,274 0,151 -123,274 -274,274 -151,0 -274,-123 -274,-274 0,-151 123,-274 274,-274zm-500 1189c134,0 243,109 243,243 0,134 -109,243 -243,243 -134,0 -243,-109 -243,-243 0,-134 109,-243 243,-243zm500 1223c121,0 218,98 218,218 0,121 -98,218 -218,218 -121,0 -218,-98 -218,-218 0,-121 98,-218 218,-218zm1116 434c110,0 200,89 200,200 0,110 -89,200 -200,200 -110,0 -200,-89 -200,-200 0,-110 89,-200 200,-200zm1145 -434c81,0 147,66 147,147 0,81 -66,147 -147,147 -81,0 -147,-66 -147,-147 0,-81 66,-147 147,-147zm459 -1098c65,0 119,53 119,119 0,65 -53,119 -119,119 -65,0 -119,-53 -119,-119 0,-65 53,-119 119,-119z"\n            ></path>\n          </svg>\n        </div>\n      </div>')}}();